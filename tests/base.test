test test-1.0 {Build a basic installer} -body {
    buildInstaller
    file exists $::env(IJTEST_INSTALLER)
} -result {1}

test test-1.1 {Test a basic installer} -body {
    runInstallerTest {
        inject after Welcome {
            test_pressButton "Next >"
        }

        inject after SelectDestination {
            test_pressButton "Next >"
        }

        inject after SetupType {
            test_pressButton "Next >"
        }

        inject after StartCopyingFiles {
            test_pressButton "Next >"
        }

        inject after SetupComplete {
            test_pressButton "Finish"
        }
    }

    if {![file exists $info(InstallInfoDir)]} {
        error "Registry directory not created"
    }

    cd $info(InstallInfoDir)
    if {![file exists $info(InstallID).info]} {
        error ".info file not created"
    }

    if {![file exists $info(InstallID).log]} {
        error ".log file not created"
    }
}
